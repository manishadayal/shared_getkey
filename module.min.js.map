{"version":3,"sources":["module.js"],"names":["M","mod_congrea","handleJSONP","data","error","window","location","href","key","secret","handleFailure","alert","submit_form","e","Y","preventDefault","form","document","getElementsByTagName","fname","firstname","value","lname","lastname","email","domain","datacenter","fdata","JSON","stringify","jsonp","method","on","success","failure","context","init","one"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AAQAA,CAAC,CAACC,WAAF,GAAgB;AAEZC,EAAAA,WAAW,EAAE,qBAASC,IAAT,EAAe;AAExB,QAAIA,IAAI,CAACC,KAAT,EAAgB;AACZC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,uBAAuBJ,IAAI,CAACC,KAAnD;AACH,KAFD,MAEO;AACHC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,uBAAuBJ,IAAI,CAACK,GAA5B,GAAkC,KAAlC,GAA0CL,IAAI,CAACM,MAAtE;AACH;AACJ,GATW;AAWZC,EAAAA,aAAa,EAAE,uBAASP,IAAT,EAAe;AAC1BQ,IAAAA,KAAK,CAAC,qBAAD,CAAL;AACH,GAbW;AAeZC,EAAAA,WAAW,EAAE,qBAASC,CAAT,EAAY;AACrB,QAAIC,CAAC,GAAG,KAAKA,CAAb,CADqB,CAErB;;AACAD,IAAAA,CAAC,CAACE,cAAF;AAEA,QAAIC,IAAI,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,CAAX;AACA,QAAIC,KAAK,GAAGH,IAAI,CAAC,CAAD,CAAJ,CAAQI,SAAR,CAAkBC,KAA9B;AACA,QAAIC,KAAK,GAAGN,IAAI,CAAC,CAAD,CAAJ,CAAQO,QAAR,CAAiBF,KAA7B;AACA,QAAIG,KAAK,GAAGR,IAAI,CAAC,CAAD,CAAJ,CAAQQ,KAAR,CAAcH,KAA1B;AACA,QAAII,MAAM,GAAGT,IAAI,CAAC,CAAD,CAAJ,CAAQS,MAAR,CAAeJ,KAA5B;AACA,QAAIK,UAAU,GAAGV,IAAI,CAAC,CAAD,CAAJ,CAAQU,UAAR,CAAmBL,KAApC;AACA,QAAIM,KAAK,GAAG;AACRP,MAAAA,SAAS,EAAED,KADH;AAERI,MAAAA,QAAQ,EAAED,KAFF;AAGRE,MAAAA,KAAK,EAAEA,KAHC;AAIRC,MAAAA,MAAM,EAAEA,MAJA;AAKRC,MAAAA,UAAU,EAAEA,UALJ,CAKe;;AALf,KAAZ;AAOAV,IAAAA,IAAI,GAAGF,CAAC,CAACc,IAAF,CAAOC,SAAP,CAAiBF,KAAjB,CAAP,CAlBqB,CAoBrB;AACA;AACA;AAEA;;AACAb,IAAAA,CAAC,CAACgB,KAAF,CAAQ,0DAA0Dd,IAAlE,EAAwE;AACpEe,MAAAA,MAAM,EAAE,KAD4D;AAEpEC,MAAAA,EAAE,EAAE;AACAC,QAAAA,OAAO,EAAE,KAAK/B,WADd;AAEAgC,QAAAA,OAAO,EAAE,KAAKxB;AAFd,OAFgE;AAMpEyB,MAAAA,OAAO,EAAE;AAN2D,KAAxE;AAQH,GAhDW;AAmDZC,EAAAA,IAAI,EAAE,cAAStB,CAAT,EAAY;AACd,QAAIqB,OAAO,GAAGnC,CAAC,CAACC,WAAhB;AACA,SAAKa,CAAL,GAASA,CAAT;AACAA,IAAAA,CAAC,CAACuB,GAAF,CAAM,kBAAN,EAA0BL,EAA1B,CAA6B,OAA7B,EAAsC,KAAKpB,WAA3C,EAAwD,IAAxD;AACH;AAvDW,CAAhB","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript library for the quiz module.\n *\n * @package    mod_congrea\n * @copyright  2020 onwards Manisha Dayal  {@link http://vidyamantra.com}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nM.mod_congrea = {\n\n    handleJSONP: function(data) {\n\n        if (data.error) {\n            window.location.href = \"getkeyindex.php?e=\" + data.error;\n        } else {\n            window.location.href = \"getkeyindex.php?k=\" + data.key + \"&s=\" + data.secret;\n        }\n    },\n\n    handleFailure: function(data) {\n        alert(\"Ajax request failed\");\n    },\n\n    submit_form: function(e) {\n        var Y = this.Y;\n        // Stop the form submitting normally\n        e.preventDefault();\n\n        var form = document.getElementsByTagName('form');\n        var fname = form[1].firstname.value;\n        var lname = form[1].lastname.value;\n        var email = form[1].email.value;\n        var domain = form[1].domain.value;\n        var datacenter = form[1].datacenter.value;\n        var fdata = {\n            firstname: fname,\n            lastname: lname,\n            email: email,\n            domain: domain,\n            datacenter: datacenter // TODO.\n        };\n        form = Y.JSON.stringify(fdata);\n\n        // If your form has a cancel button, you need to disable it, otherwise it'll be sent with the request\n        // and Moodle will think your form was cancelled\n        //Y.one('#id_cancel').set('disabled', 'disabled');\n\n        // Send the request\n        Y.jsonp('https://www.vidyamantra.com/portal/getvmkey.php?data=' + form, {\n            method: 'GET',\n            on: {\n                success: this.handleJSONP,\n                failure: this.handleFailure\n            },\n            context: this\n        });\n    },\n\n\n    init: function(Y) {\n        var context = M.mod_congrea;\n        this.Y = Y;\n        Y.one('#id_submitbutton').on('click', this.submit_form, this);\n    }\n}"],"file":"module.min.js"}